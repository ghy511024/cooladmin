// admin.js v3
// 
// http://admin.nln.me
// @author ghy
// @contact qq 249398279
// build: 2016-07-22
// 
var Ut=function(){return Ut={getParam:function(a){var b=window.location.search,c={},d=b.replace("?","").split("&");for(var e in d){var f=d[e];c[f.split("=")[0]]=f.split("=")[1]}return null!=a?c[a]:c},gettime:function(a){var b=null;if(null!=a&&0!=a.length){var c=a.split(" ");if(null!=c&&c.length>1){var d=(c[0]||"-").split("-"),e=d[0],f=Number(d[1])-1,g=d[2],h=c[1].split(":"),i=h[0],j=h[1];b=new Date(e,f,g,i,j).getTime()}return b}},Null:function(a){return null==a||""==a||0==a.length},isURL:function(a){return null==a.match(/(http[s]?|ftp):\/\/[^\/\.]+?\..+(\w|\/)$/i)?!1:!0},getTimeTostr:function(a){var b="",a=Number(a)||-1;if(a>0){var c=new Date(a),d=c.getMonth()+1;d=10>d?"0"+d:d;var e=c.getDate();e=10>e?"0"+e:e;var f=c.getHours();f=10>f?"0"+f:f;var g=c.getMinutes();g=10>g?"0"+g:g,b=c.getFullYear()+"-"+d+"-"+e+" "+f+":"+g}return b},search:function(a,b){var c=Ut.getParam();c[a]=b;var d=[];for(var e in c)null!=e&&e.length>0&&d.push(e+"="+c[e]);var f=d.join("&");return f}}}(),CssTool={makstyle:function(a){var b=this.getstyle(a);$('<style type="text/css">'+b+"</style>").appendTo("head")},getstyle:function(a){for(var b="",c=this._getstyleArray(a),d=0;d<c.length;d++)for(var e=c[d],f=e.length-1;f>=0;f--){var g=e[f];for(var h in g){var i=h.replace(/[#]/gi," #").replace(/[\.]/gi," .").replace(/&\s/gi,"&").replace(/&/gi,""),j=g[h];b+=i+"{"+j+"}"}}return b=b.replace(/^\s/gi,"")},_getstyleArray:function(a){var b=[];for(var c in a){var d=this._getyles(c,a[c]);b.push(d)}return b},_getyles:function(a,b){function c(a,b){var e={};for(var f in b)/[#\.&]/gi.test(f)&&"object"==typeof b[f]?c(a+f,b[f]):e[a]=(e[a]||"")+f+":"+b[f]+";";d.push(e)}var d=[];return c(a,b),d}};jQuery.fn.zen=function(a,b){var c=$(this);return void 0==typeof a?c:(a.replace(/^([^>+]+)(([>+])(.*))?/,function(a,d,e,f,g){d.replace(/^([^*]+)(\*([0-9]+))?/,function(a,d,e,h){void 0==h&&(h=1),1>h&&(h=1);for(var i=d.match(/[^.#]+/)[0],j=1;h>=j;j++){var k=$("<"+i+">");d.replace(/([.#])([^.#]+)/g,function(a,b,c){"#"==b?k.attr("id",c):"."==b&&k.addClass(c)}),c.append(k),void 0==f?void 0!=b&&jQuery.each([k],b):"+"==f?c.zen(g,b):">"==f&&k.zen(g,b)}})}),$(this))},window.zen=function(a,b){var c=$("<span>").zen(a,b).html();return $(c)},window.fytip=function(a){var b,c=!1,d=!1,e={init:function(){this.layout(),this.initEvent()},layout:function(){var b={".fy-slide-tip":{position:"fixed",padding:"5px","z-index":"1000","font-size":"12px","line-height":"1.4",opacity:"0.95",top:"0px",".arrow":{position:"absolute",width:"0",height:"0","border-color":"transparent","border-style":"solid","border-width":"5px 5px 5px 5px","&.top-arrow":{left:"50%",bottom:"-5px","margin-left":"-5px","border-top-color":"#425160"},"&.right-arrow":{top:"50%",left:"-5px","margin-top":"-5px","border-right-color":"#425160"}},".tip-inner":{"max-width":"400px",padding:"12px 8px",color:"#fff","text-align":"center","text-decoration":"none","border-radius":"0",background:"#163342"}}};a(".fy-tip").length&&CssTool.makstyle(b)},initEvent:function(){a(".fy-tip").on({mouseenter:function(){c=!0;var b=a(f.getSinleton()),d=a(this).offset().top,e=a(this).offset().left,g=a(this).innerWidth(),h=a(this).innerHeight(),i=a(this).attr("data-tip")||"top",j=a(this).attr("data-desc")||"content";"content"==j&&(j=a(this).html()),f.reset(),b.find(".arrow").addClass(i+"-arrow"),b.find(".tip-inner").html(j);var k=b.width(),l=b.height();"top"==i&&b.css({left:e-(k-g+5)/2,top:d-l-10}),"right"==i&&(b.css({left:e+g+2,top:d-(l-h)/2-5}),b.addClass("")),b.show()},mouseleave:function(){c=!1,setTimeout(function(){if(!c&&!d){var b=a(f.getSinleton());b.hide()}},50)}}),a(document).on("mouseenter",".fy-slide-tip",function(){d=!0}),a(document).on("mouseleave",".fy-slide-tip",function(){d=!1;var b=a(f.getSinleton());b.hide()})},reset:function(){var b=a(f.getSinleton()).find(".arrow");b.removeClass("top-arrow"),b.removeClass("right-arrow"),b.removeClass("left-arrow"),b.removeClass("bottom-arrow")},getSinleton:function(){function c(){return null==b&&(b=new d),b}function d(){var b=document.createElement("div");return a(b).addClass("fy-slide-tip"),a(b).append(a('<div class="arrow"></div>')),a(b).append(a('<div class="tip-inner"></div>')),a("body").append(b),b}return c()}},f=e;return e}($),$(document).ready(function(){fytip.init()});var alertStyle={"#zalert":{display:"none","font-family":"'微软雅黑'",top:"0",left:"0",width:"100%",height:"100%",position:"fixed","z-index":"99999"},"#zalert .bk":{opacity:"0.5",width:"100%",height:"100%",background:"#000",filter:"alpha(opacity=50)"},"#zalert .z-close":{position:"absolute",right:"8px","font-size":"24px",top:"0px",color:"#B3B2B2",cursor:"pointer"},"#zalert .z-close:hover":{color:"#5F5A5A"},"#zalert .panel":{background:"#FFF","border-radius":"3px",position:"fixed","z-index":"99999999",width:"400px","min-height":"100px",padding:"15px 20px",left:"50%",top:"25%","margin-left":"-200px"},"#zalert .info":{margin:"30px auto","text-align":"center","font-size":"14px",height:"24px","line-height":"24px",width:"100%"},"#zalert .zbtn":{width:"60px",border:"1px solid #df1155",color:"#fff","background-color":"#f71d65","font-size":"14px","text-align":"center",cursor:"pointer",margin:"0px auto 20px",top:"25%",padding:"2px 5px"},"#zalert .zbtn:hover":{"background-color":"#FD4884"}};window.zalert=function(){var a={init:function(){this.cstyle(),this.initEvent(),this.cpage()},cstyle:function(){$('<style type="text/css">'+a.getstyle(alertStyle)+"</style>").appendTo("head")},cpage:function(){var a=zen("div#zalert>div.bk+div.panel"),b=$(a).find(".panel");b.zen("div.title-wrap>div.z-title+div.z-close"),b.zen("div.content>div.info+div.zbtn"),$(b).find(".z-close").html("×"),$(b).find(".z-title").html("来自章鱼tv的提示"),$(b).find(".zbtn").html("确定"),$("body").append(a)},initEvent:function(){$(document).on("click","#zalert .zbtn,#zalert .z-close",function(){$("#zalert").hide()})},alert:function(a,b){$("#zalert").fadeIn(),$("#zalert .info").html(a)},getstyle:function(a){function b(a){var b="";for(var c in a)if(/[#\.]/gi.test(c)&&"object"==typeof a[c]){var d=a[c],e="";for(var f in d)e+=f+":"+d[f]+";";b+=c+"{"+e+"}"}return b}var c=b(a);return c}};return $(document).ready(function(){a.init()}),function(b,c){a.alert(b,c)}}(),window.ImgUp=function(){var a={init:function(){this.wrapAllImgUp(),this.layout(),this.viewImg()},initEvent:function(){},layout:function(){b("http://static.ws.kukuplay.com/common/lib/ajaximg/ajaxupload.js",function(){a.bindAllImgUp()})},wrapAllImgUp:function(){$(".zy-imgup").each(function(){a.wrapImgUp($(this))})},wrapImgUp:function(a){$(a).wrap("<div class='zyform-up-wrap'></div>");var b=$('<i class="fa fa-eye zyadmin-eyeicon"></i>'),c=$('<i class="fa fa-cloud-upload zyadmin-upicon"></i>');$(a).parent().append(b).append(c)},bindAllImgUp:function(){$(".zyform-up-wrap .zyadmin-upicon").each(function(){a.bindImgUp($(this))})},bindImgUp:function(a){window.UpConf=window.UpConf||{};var b=UpConf.upurl||"/picture/multiupload",c=UpConf.returl||"origin",d=UpConf.success;null!=b&&b.length>0&&new AjaxUpload(a,{action:b,name:"upfile",data:{maxWidth:"120",maxHeight:"120"},dataType:"json",autoSubmit:!0,onSubmit:function(a,b){},onComplete:function(b,e){if(console.log("上传回调:"+e),"string"==typeof e)try{e=JSON.parse(e)}catch(f){console.log("返回数据转换为对象失败。。。",e)}if(null!=e){if(e instanceof Array)for(var g in e){var h=e[g],i=h[c],j=i.url;$(a).parent().find("input").val(j)}else{var k=e[c];k instanceof Array?null!=k&&k.length>0&&$(a).parent().find("input").val(k[0]):"string"==typeof k&&$(a).parent().find("input").val(k)}"function"==typeof d&&d(e,$(a).parent().find("input"))}else alert("返回数据为空")}})},viewImg:function(){$(document).on("mouseenter",".zyadmin-eyeicon",function(){var a=$(this).parent().find("input").val();return null==a.match(/(http[s]?|ftp):\/\/[^\/\.]+?\..+(\w|\/)$/i)?!1:void($(this).parent().find(".viewimg").length?$(this).parent().find(".viewimg").attr("src",a).show():($(this).parent().append("<img class='viewimg' src='"+a+"'/>"),$(this).parent().find("img").show()))}),$(document).on("mouseleave",".zyform-up-wrap",function(){$(this).parent().find(".viewimg").hide()})}},b=function(a,b){var c=null;c=document.createElement("script"),c.type="text/javascript","function"==typeof b&&(c.onload=c.onreadystatechange=function(){var a=c.readyState;a&&"loaded"!==a&&"complete"!==a||(c.onreadystatechange=null,b())}),c.src=a,document.getElementsByTagName("head")[0].appendChild(c)};return a}(),$(function(){ImgUp.init()}),window.zform=function(){var tmpfun,zform={init:function(){zform.initEvent()},initEvent:function(){$(document).on("click",".add-dyn",function(){var a=$(this).parent().find(".dyn-tmp").clone().removeClass("dyn-tmp");$(this).parent().find(".dyn-list").append(a);var b=$(a).find(".zy-imgup");b.length&&(ImgUp.wrapImgUp(b),ImgUp.bindImgUp($(b).parent().find(".zyadmin-upicon"))),zform.resize()}),$(document).on("click",".add-zlist",function(){var a=$(this).parent().find(".list-tmp").clone().removeClass("list-tmp");$(this).parent().find(".z-list").append(a),zform.resize()}),$(document).on("click",".up-dyn,.up-zlist",function(){var a=$(this).parent(),b=$(a).prev();b.before(a)}),$(document).on("click",".del-zlist",function(){var a=$(this).parent();a.remove()}),$(document).on("click",".z-form .close,.z-form .cancel",function(){$(".zform-cover").hide(),tmpfun=null}),$(document).on("click",".z-form .save",function(){zform.save()})},bindEvent:function(){},save:function(){var a=zform.getData();console.log("save data:",JSON.stringify(a)),null!=tmpfun&&"function"==typeof tmpfun?tmpfun(a):alert("callback is null")},getData:function(){var data={};return $(".z-form .form .item").each(function(){var type=$(this).data("ftype"),key=$(this).data("fkey"),dtype=$(this).attr("dtype");if(!Ut.Null(key))if("text"==type){var value=($(this).find("input").val()||"").trim();null!=value&&value.length>0&&(data[key]=value)}else if("time"==type){var value=($(this).find("input").val()||"").trim();if(null!=value&&value.length>0)try{var times=Ut.gettime(value);data[key]=times}catch(e){alert(e)}}else if("select"==type){var value=$(this).find("select").val();null!=value&&value.length>0&&(data[key]=value)}else if("radio"==type){var name=$(this).find("input[type='radio']").attr("name"),value=$(this).find("input[name='"+name+"']:checked").val();null!=value&&value.length>0&&(data[key]=value)}else if("textarea"==type){var value=$(this).find("textarea").val();null!=value&&value.length>0&&(data[key]=value)}else if("checkbox"==type){var checkret=[];$(this).find("input[type='checkbox']:checked").each(function(){var a=$(this).val();checkret.push(a)}),checkret.length>0&&(data[key]=checkret)}else if("imgup"==type){var value=$(this).find("input").val(),cvalue=$(this).find("input").data("cvalue");if(null!=cvalue){var obj={};if("string"==typeof cvalue)try{obj=eval(data)}catch(e){}else obj=cvalue;data[key]=obj}else null!=value&&value.length>0&&(data[key]=value)}else if("zlist"==type){var array=zform.getZlist($(this),dtype);array.length>0&&(data[key]=array)}else if("dynlist"==type){var array=zform.getDynlist($(this));array.length>0&&(data[key]=array)}}),data},getZlist:function(a,b){var c=[];return $(a).find(".z-list .zlist-item").each(function(){var a=$(this).find("input").val();Ut.Null(b)||"number"!=b||(a=Number(a)||null),Ut.Null(a)||c.push(a)}),c},getDynlist:function(el){var retarray=[];return $(el).find(".dyn-list .dyn-item").each(function(){var map={},haskey=!1;$(this).find("input").each(function(){var key=$(this).attr("key"),value=$(this).val(),cvalue=$(this).data("cvalue");if(null!=cvalue){var obj={};if("string"==typeof cvalue)try{obj=eval(cvalue)}catch(e){}else obj=cvalue;haskey=!0,obj instanceof Array?obj.length>0&&(map=obj[0]):map=obj}else null!=key&&null!=value&&value.length>0&&(map[key]=value,haskey=!0)}),haskey&&retarray.push(map)}),retarray},cform:function(a,b){"function"==typeof b&&(tmpfun=b),cform.cform(a)},eform:function(a,b,c){"function"==typeof c&&(tmpfun=c),cform.eform(a,b)},resize:function(){$(".zform-cover .z-form").removeAttr("style"),$(window).resize();var a=$(".zform-cover").find(".form").height(),b=$(".zform-cover").find(".z-form").height();b-a>70&&$(".zform-cover .z-form").css({height:a+70})}};return zform}(),window.cform=function(){function clone(a){function b(){}b.prototype=a;var c=new b;for(var d in c)"object"==typeof c[d]&&(c[d]=clone(c[d]));return c}var instance,cform={cform:function(a){var b=_this.getSinleton(),c=$(b).find(".form");$(c).empty();for(var d in a){var e=a[d];if(null!=e){var f=e.type;if("text"==f){var e=_this._getText(a[d],d);$(c).append(e)}else if("radio"==f){var e=_this._getRadio(a[d],d);$(c).append(e)}else if("checkbox"==f){var e=_this._getCheckbox(a[d],d);$(c).append(e)}else if("select"==f){var e=_this._getSlect(a[d],d);$(c).append(e)}else if("textarea"==f){var e=_this._getTextArea(a[d],d);$(c).append(e)}else if("zlist"==f){var e=_this._getList(a[d],d);$(c).append(e)}else if("dynlist"==f){var e=_this._getDynlist(a[d],d);$(c).append(e)}else if("imgup"==f){var e=_this._getImgUp(a[d],d);$(c).append(e)}else if("time"==f){var e=_this._getTime(a[d],d);$(c).append(e)}}}var g=zen("div.item.save-wrap>div.btn.btn-default.cancel+div.btn.btn-success.save");$(g).find(".cancel").html("取消"),$(g).find(".save").html("保存"),$(c).append(g),$(b).show(),setTimeout(function(){zform.resize()},1)},eform:function(el,data,fun){var tmpdata={};$(el).find("td").each(function(){var key=$(this).data("key"),value=$(this).attr("data-value"),forbid=$(this).data("forbid");if(null!=key&&key.length>0){!data[key]||null!=value&&0!=value.length?!data[key]||"text"!=data[key].type&&"textarea"!=data[key].type||null==value||(value=$(this).attr("data-value")):("text"==data[key].type||"textarea"==data[key].type)&&(value=($(this).html()||"").trim());for(var tmpkey in data)if(tmpkey==key){if(tmpdata[key]=clone(data[key]),/^\[/gi.test(value))try{tmpdata[key].value=eval(value)}catch(e){console.log("td数据转换出错",el)}else if(/###/gi.test(value)){var array=value.split("###");tmpdata[key].value=array}else tmpdata[key].value=value;null!=forbid&&forbid&&(tmpdata[key].forbid=!0);break}}}),cform.cform(tmpdata)},_getText:function(a,b){if(null!=a&&null!=b){var c=a.name,d=a.value,e=a.forbid,f=zen("div.item>label");return $(f).attr("data-ftype","text"),$(f).attr("data-fkey",b),$(f).find("label").html(c+"："),$(f).append($("<input type='text' value='"+(d||"")+"'/>")),e&&$(f).find("input").attr("disabled","true"),$(f)}},_getImgUp:function(a,b){if(null!=a&&null!=b){var c=a.name,d=a.value,e=a.forbid,f=zen("div.item>label");$(f).attr("data-ftype","text"),$(f).attr("data-fkey",b),$(f).find("label").html(c+"：");var g=$("<input type='text' value='"+(d||"")+"' class='zy-imgup'/>");return $(f).append(g),e&&$(f).find("input").attr("disabled","true"),ImgUp.wrapImgUp(g),ImgUp.bindImgUp($(g).parent().find(".zyadmin-upicon")),$(f)}},_getRadio:function(a,b){if(null!=a&&null!=b){var c=a.check,d=a.value,e=zen("div.item.check-item>label");$(e).attr("data-ftype","radio"),$(e).attr("data-fkey",b);for(var f in c){var g=c[f],h=g.name,i=g.value,j=$("<label>"+h+"：</label>");if(d==i)var k=$("<input type='radio' name='"+b+"' value='"+i+"' checked/>");else var k=$("<input type='radio' name='"+b+"' value='"+i+"'/>");$(e).append(j),$(e).append(k)}return $(e)}},_getCheckbox:function(a,b){if(null!=a&&null!=b){var c=a.check,d=a.value;"string"==typeof d&&(d=JSON.parse(d));var e=zen("div.item.check-item>label");$(e).attr("data-ftype","checkbox"),$(e).attr("data-fkey",b);for(var f in c){var g=c[f],h=g.name,i=g.value,j=$("<label>"+h+"：</label>"),k=$("<input type='checkbox' value='"+i+"'/>");for(var l in d)d[l]==i&&k.attr("checked","true");$(e).append(j),$(e).append(k)}return $(e)}},_getSlect:function(a,b){if(null!=a&&null!=b){var c=a.select,d=a.value,e=a.name,f=zen("div.item.select-item>label");$(f).attr("data-ftype","select"),$(f).attr("data-fkey",b);var g=$("<select></select>");$(f).find("label").html(e+"：");for(var h in c){var i=c[h],e=i.name,j=i.value,k=$("<option value='"+j+"'>"+e+"</option>");d===j&&k.attr("selected","true"),$(g).append(k)}return $(f).append(g),$(f)}},_getTextArea:function(a,b){if(null!=a&&null!=b){var c=a.name,d=a.value,e=zen("div.item>label");return $(e).attr("data-ftype","textarea"),$(e).attr("data-fkey",b),$(e).find("label").html(c+"："),$(e).append($("<textarea>"+(d||"")+"</textarea>")),$(e)}},_getList:function(a,b,c){if(null!=a&&null!=b){var d=a.name,e=(a.list,a.value),f=a.dtype,g=zen("div.item>label+div.z-list");$(g).attr("data-ftype","zlist"),$(g).attr("data-fkey",b),$(g).find("label").html(d+"：");var h=zen("span.op-btn.add-zlist>i.fa.fa-plus-square.fa-1x");$(g).append(h);var i=$(g).find(".z-list"),j=zen("div.zlist-item.list-tmp>span.op-btn.del-zlist+span.op-btn.up-zlist");$(j).find(".del-zlist").append(zen("i.fa.fa-trash-o.fa-1x")),$(j).find(".up-zlist").append(zen("i.fa.fa-arrow-up.fa-1x")),$(g).append(j);var k=$($("<input type='text'>"));$(j).append(k);for(var l in e){var m=zen("div.zlist-item>span.op-btn.del-zlist+span.op-btn.up-zlist"),n=e[l],k=$($("<input type='text'   value='"+n+"'>"));$(m).append(k),$(m).find(".del-zlist").append(zen("i.fa.fa-trash-o.fa-1x")),$(m).find(".up-zlist").append(zen("i.fa.fa-arrow-up.fa-1x")),i.append(m)}return null!=f&&"number"==f&&g.attr("dtype","number"),g}},_getDynlist:function(a,b,c){if(null!=a&&null!=b){var d=a.name,e=a.list,f=a.value,g=a.imgup+""=="true";if(null!=e&&e.length>0){var h=zen("div.item>label+div.dyn-list");$(h).attr("data-ftype","dynlist"),$(h).attr("data-fkey",b),$(h).find("label").html(d+"：");var i=zen("span.op-btn.add-dyn>i.fa.fa-plus-square.fa-1x");$(h).append(i);var j=$(h).find(".dyn-list"),k=zen("div.dyn-item.dyn-tmp>span.op-btn.del-dyn+span.op-btn.up-dyn");$(k).find(".del-dyn").append(zen("i.fa.fa-trash-o.fa-1x")),$(k).find(".up-dyn").append(zen("i.fa.fa-arrow-up.fa-1x")),$(h).append(k);for(var l in e){var d=e[l].name,m=e[l].key,n=$("<label>"+d+"：</label>"),o=$($("<input type='text' key='"+m+"'>"));$(k).append(n),$(k).append(o),g&&o.addClass("zy-imgup")}for(var p in f){var q=zen("div.dyn-item>span.op-btn.del-dyn+span.op-btn.up-dyn"),a=f[p];for(var r in a){var n=$("<label>"+r+"：</label>");a[r].value=a[r].value||"";var o=$($("<input type='text' key='"+a[r].key+"'  value='"+a[r].value+"'>"));if($(q).append(n),$(q).append(o),g){o.addClass("zy-imgup"),ImgUp.wrapImgUp(o),ImgUp.bindImgUp($(o).parent().find(".zyadmin-upicon"));var s=a[r].cvalue;null!=s&&o.attr("data-cvalue",JSON.stringify(s))}}$(q).find(".del-dyn").append(zen("i.fa.fa-trash-o.fa-1x")),$(q).find(".up-dyn").append(zen("i.fa.fa-arrow-up.fa-1x")),j.append(q)}return h}}},_getTime:function(a,b){if(null!=a&&null!=b){var c=a.name,d=a.value,e=a.forbid,f=zen("div.item>label");$(f).attr("data-ftype","time"),$(f).attr("data-fkey",b),$(f).find("label").html(c+"：");var g=$("<input type='text'/>");try{if(g.datetimepicker(),d+="",!Ut.Null(d)&&13==d.length){var h=Ut.getTimeTostr(d);$(g).val(h)}}catch(i){}return $(f).append(g),e&&$(f).find("input").attr("disabled","true"),$(f)}},getSinleton:function(){function a(){return null==instance&&(instance=new b),instance}function b(){var a=document.createElement("div");return $(a).addClass("zform-cover"),$(a).append($('<div class="bk"></div>')),$(a).append($('<div class="z-form"><div class="close">×</div><div class="form-scroll"><div class="form"></div></div></div>')),$("body").append(a),a}return a()}},_this=cform;return cform}(),$(function(){zform.init()}),window.Zimgmask={init:function(){this.cstyle(),this.initEvent(),this.cpage()},cstyle:function(){var a={".maskimg":{cursor:"pointer",color:"#ba8bdc"},".zmaskpanel":{position:"fixed",width:"100%",height:"100%","z-index":"1000",background:"rgba(0,0,0,0.65)",display:" none",".image-info":{position:"absolute",height:"80px",color:"whitesmoke",left:"50%","font-size":"12px","text-align":"center"," padding-bottom":"0px",".link":{color:"whitesmoke","&:hover":{color:"#ef4545"}}},".mask-image":{position:"fixed",left:"50%",top:"50%",border:"1px solid #000000"},".mask-image-close ":{position:"absolute","z-index":"10",height:"30px",width:"30px"," line-height":"150px",overflow:"hidden",background:"#ff6464","border-radius":"50%",".zimgclose":{display:"block",height:"30px",width:"30px",overflow:"hidden",cursor:"pointer","text-align":"center","line-height":"26px",opacity:"1",color:"#fff","font-size":"30px"}}}};CssTool.makstyle(a)},cpage:function(){var a=zen("div.zmaskpanel>div.image-info+div.mask-image+div.mask-image-close"),b=$(a).find(".image-info");b.zen("p+a.link"),$(b).find("a").attr("href","").attr("target","_blank");var c=$(a).find(".mask-image");c.zen("img"),$(c).find("img").attr("src","");var d=$(a).find(".mask-image-close");d.zen(".zimgclose"),$(d).find(".zimgclose").attr("onclick","jQuery('.zmaskpanel').fadeOut()").html("×"),$("body").append(a)},initEvent:function(){$(".maskimg").on("click",function(a){var b=$(this).attr("_link")||$(this).html();Zimgmask.changeImage(b)})},changeImage:function(a){$(".mask-image img").attr("src",a);var b=$(window).width()-400,c=$(window).height()-400,d=new Image;d.src=a,d.onload=function(){var e=d.height.toString()+"*"+d.width;$(".image-info p ").html("图片尺寸："+e),$(".image-info a ").attr("href",a).html("图片地址："+a),d.width<=b?($(".image-info ").css("width",d.width).css("margin-left",-d.width/2).css("margin-top",$(window).height()/2-d.height/2-130),$(".mask-image ").css("width",d.width).css("height",d.height).css("margin-left",-d.width/2).css("margin-top",-d.height/2),$(".mask-image img").css("width",d.width).css("height",d.height),$(".mask-image-close").css("right",$(window).width()/2-d.width/2-15).css("margin-top",$(window).height()/2-d.height/2-65),d.height>=c&&($(".image-info ").css("margin-top",50),$(".mask-image ").css("height",c).css("margin-top",-c/2),$(".mask-image img").css("height",c),$(".mask-image-close").css("margin-top",135))):($(".image-info ").css("width",b).css("margin-top",$(window).height()/2-d.height/2-110).css("margin-left",-b/2),$(".mask-image ").css("width",b).css("height",d.height).css("margin-left",-b/2).css("margin-top",-d.height/2),$(".mask-image img").css("width",b).css("height",d.height),$(".mask-image-close").css("right",185).css("margin-top",$(window).height()/2-d.height/2-15),d.height>=c&&($(".image-info ").css("margin-top",50),$(".mask-image ").css("height",c).css("margin-top",-c/2),$(".mask-image img").css("height",c),$(".mask-image-close").css("margin-top",135))),d.src=a},$(".zmaskpanel").fadeIn()}},$(function(){Zimgmask.init()});var Admins=function(){var a={init:function(){this.load(),this.layout(),this.initEvent()},layout:function(){this.timePicker(),setTimeout(function(){$("#table,#example").dataTable({iDisplayLength:100,sScrollX:"100%",sScrollXInner:"100%",aLengthMenu:[100,200,300]}),$("#table10").dataTable({iDisplayLength:10,aLengthMenu:[[10,20,50,100],[10,20,50,100]],sScrollX:"100%",sScrollXInner:"100%"})},500)},timePicker:function(){$(".time").each(function(){var a=$(this).attr("time");if(Ut){var b=Ut.getTimeTostr(a);$(this).html(b)}});try{var a=$("#start-time").attr("start")||Ut.getParam("start"),b=$("#end-time").attr("end")||Ut.getParam("end");if(null!=a){10==a.length&&(a=1e3*Number(a));var a=new Date(Number(a)),c=Ut.getTimeTostr(a);$("#start-time").val(c)}if(null!=b){10==b.length&&(b=1e3*Number(b));var b=new Date(Number(b)),d=Ut.getTimeTostr(b);$("#end-time").val(d)}$(".timepicker").datetimepicker()}catch(e){}},initEvent:function(){$("table").on("click",".trup",function(){var a=$(this).parent().parent(),b=$(a).prev();b.before(a)}),$("table").on("click",".trdown",function(){var a=$(this).parent().parent(),b=$(a).next();b.after(a)}),$("table").on("click",".trdel",function(){var a=$(this).parent().parent();a.remove()}),$(".nav-tabs").on("click","li a",function(){$(this).parent().parent().find(".active").removeClass("active"),$(this).parent().addClass("active");var a=$(this).attr("data-id");$(".nav-content").removeClass("active"),$("#"+a).addClass("active")})},load:function(){if(0==$(".topbar").length)if("undefined"!=typeof AdminPage&&null!=AdminPage)a.cpage(AdminPage),a.cRightPage();else{var b=window.CONF_URL;Ut.Null(b)&&(b="/api/getadminpagelink"),$.ajax({url:b,type:"post",data:{},dataType:"json",success:function(b){a.cpage(b),Admins.cRightPage()}})}},cpage:function(b){if(b){var c="",d="",e="";if("undefined"!=typeof AdminConf)c=AdminConf.top,d=AdminConf.tag,e=AdminConf.link;else{var f=a.getCurrentPage(b);c=f.ctop,d=f.ctag,e=f.clink}var g=zen("div.topbar>div.topbar-left.left-home>a>i.fa.fa-home.fa-3x"),h=zen("div.topbar-left");g.append(h),window.HOME_LINK&&g.find("a").attr("href",window.HOME_LINK),$("body").prepend(g),$("#content").wrap(zen("div.main-content>div.content-inner.left-content>div.content-body"));var i=$(".main-content");i.zen("div.left-slide-bar>ul");var j=i.find(".left-slide-bar"),k=$(".content-inner");k.zen("div.inner-slide-bar>div.list");var l=k.find(".inner-slide-bar"),m=null;for(var n in b){var o=b[n],p=o.name,q=o.url,r=$("<div><a href='"+q+"'><span></span></a></div>");r.addClass("topbar-nav-btn"),r.find("a").attr("src",q),r.find("span").html(p),$(h).append(r),p==c&&(m=o,r.addClass("active"));for(var s=zen("div.dropdown-menu"),t=o.tag||[],n=0;n<t.length;n++){for(var u=zen("div.topbar-nav-col>div.col-title+ul"),v=t[n].links||[],w=0;w<v.length;w++){var x=v[w].url,p=v[w].name,y=$("<li ><a href='"+x+"'>"+p+"</a></li>");$(u).find("ul").append(y)}s.append(u)}r.append(s)}var z=null;if(null!=m&&null!=m.tag)for(var A=0;A<m.tag.length;A++){var B=m.tag[A],C=$("<li><a href='"+B.url+"'>"+B.name+"</a></li>");j.find("ul").append(C),B.name==d&&(C.addClass("active"),z=B)}if(null!=z&&null!=z.links&&z.links.length>0){for(var D=$("<ul></ul>"),E=z.title||p,n=0;n<z.links.length;n++){var F=z.links[n],y=$("<li><a href='"+F.url+"'><div class='link'>"+F.name+"</div></a></li>");D.append(y),F.name==e&&y.find("a").addClass("current")}l.find(".list").append(D),l.append("<div class='title'>"+E+"</div>")}}},getCurrentPage:function(a){var b=window.location.pathname,c=window.location.href,d=window.location.host,e="",f="",g="",h={};for(var i in a)for(var j=a[i],k=0;k<j.tag.length;k++)for(var l=j.tag[k],m=0;m<l.links.length;m++){var n=l.links[m];if(n.url==b||"http://"+d+n.url==c)e=j.name,f=l.name,g=n.name,h.ctop=e,h.ctag=f,h.clink=g;else if(null!=n.item)for(var o in n.item)if(n.item[o]==b||"http://"+d+n.item[o]==c){e=j.name,f=l.name,g=n.name,h.ctop=e,h.ctag=f,h.clink=g;break}}return h},cRightPage:function(){if(window.AdminRightPage){var a=zen("div.topbar-right");for(var b in AdminRightPage){var c=zen("a.link"),d=AdminRightPage[b].name,e=AdminRightPage[b].url,f=AdminRightPage[b].cla;$(c).html(d),null!=e&&$(c).attr("href",e),$(c).addClass(f),$(a).append(c)}$(".topbar").append($(a))}}},b={init:function(){a.init()},cRightPage:function(){a.cRightPage()}};return b}();$(document).ready(function(){Admins.init(),window.zadmin&&zadmin.init()});